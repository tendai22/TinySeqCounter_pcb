# TinyFreqCounter

A little 3 digit 7 segment LED display with a simple Frequency counter, for a companiou unit of retroPC SBC's.

可愛い3桁7セグメントLED表示器です。レトロCPU基板のCPUクロック周波数表示のために作りました。PIC18F27Q43のカウンタがいい感じで3種類あったので、外付けプリスケーラなしで1チップでできました。

3桁LEDディスプレイとPIC18Fの2チップ構成です。秋月C基板サイズ(72mm x 47mm)の上半分がLEDとPIC18Fチップで、下半分は蛇の目パターンにしてあります。簡単なセンサと組み合わせて無骨な温度計なんてのもありです。

レトロPCの外部クロック発生器を74HCU04と水晶でつくると、簡単な周波数カウンタとなります。

## 周波数カウンタ

おおよそ100kHz～33MHzの範囲のクロックパルスを生成させ、CPUに食わせます。その時7セグLEDで周波数を表示させれば写真映えすると期待できます。

分解能として10進3桁、2進数で1024～2048の範囲の値を得て、そこから周波数3桁を定数を掛けたり割ったりして算出します。

周波数カウンタとしては、一定時間内のパルス数をカウントする方式です。測定時間は32.768msとします。を一定にしてプリスケーラを変えて測定終了し、結果を算出し表示します。1024～2048の範囲とは、10進数3桁に相当します。カウント後最下位ビットを見て「0捨1拾」して切りのいい数字にまとめます。

1MHz以上の範囲では、プリスケーラの分周数を次第に大きくしてオーバフローが収まり、カウント数が1024～2047の範囲になったところで測定終了、表示更新となります。

1MHz未満の範囲では、プリスケーラを1/1としてカウント数を32で割った値を周波数(kHz単位)とします。

## 7セグメントディスプレイ

なんの変哲もない素のダイナミック点灯です。1桁8msごとに更新して、ちらつきをなくしています。

## クロックジェネレータ

蛇の目部分に手配線で構成します。




